@model CRESME.Data.Quiz
@{
    ViewData["Title"] = "Quiz";

    Random rand = new Random();
    int column1 = 0;
    int column2 = 0;
    int column3 = 0;
    int column4 = 0;
    int column5 = 0;
    bool Done = false;
    int numLoops = 0;
    while(!Done || numLoops>9999){  //assigns each columnx variable a unique random number from 1-4 or 1-5 depending on the column count
        numLoops++;
        if (column1 == 0)
        {
            column1 = Model.NumColumns == 4 ? rand.Next(1, 5) : rand.Next(1, 6);
        }
        else if (column2 == 0 || column2 == column1)
        {
            column2 = Model.NumColumns == 4 ? rand.Next(1,5) : rand.Next(1,6);
        }
        else if (column3 == 0 || (column3 == column2 || column3 == column1))
        {
            column3 = Model.NumColumns == 4 ? rand.Next(1, 5) : rand.Next(1, 6);
        }
        else if (column4 == 0 || (column4 == column3 || (column4 ==column2 || column4==column1)))
        {
            column4 = Model.NumColumns == 4 ? rand.Next(1, 5) : rand.Next(1, 6);
        }
        else if ((column5 == 0 || (column5 == column4 || (column5 == column3 || (column5 == column2 || column5 == column1)))) && Model.NumColumns == 5)
        {
            column5 = Model.NumColumns == 4 ? rand.Next(1, 5) : rand.Next(1, 6);
        }
        else
        {
            Done = true;    
        }
    }
}
<h1>@ViewData["Title"]</h1>

<div class="container-fluid border m-3 w-auto mw-50" style="height:670px;">
    <div class="text-center">
        @if (Model.Image0 != null && (Model.ImagePos0 == "1"))
        {
            <img src="@Model.Image0">
        }
        else if (Model.Image1 != null && (Model.ImagePos1 == "1"))
        {
            <img src="@Model.Image1">
        }
        else if (Model.Image2 != null && (Model.ImagePos2 == "1"))
        {
            <img src="@Model.Image2">
        }
        else if (Model.Image3 != null && (Model.ImagePos3 == "1"))
        {
            <img src="@Model.Image3">
        }
        else if (Model.Image4 != null && (Model.ImagePos4 == "1"))
        {
            <img src="@Model.Image4">
        }
        else if (Model.Image5 != null && (Model.ImagePos5 == "1"))
        {
            <img src="@Model.Image5">
        }
        else if (Model.Image6 != null && (Model.ImagePos6 == "1"))
        {
            <img src="@Model.Image6">
        }
        else if (Model.Image7 != null && (Model.ImagePos7 == "1"))
        {
            <img src="@Model.Image7">
        }
        else if (Model.Image8 != null && (Model.ImagePos8 == "1"))
        {
            <img src="@Model.Image8">
        }
        else if (Model.Image9 != null && (Model.ImagePos9 == "1"))
        {
            <img src="@Model.Image9">
        }
    </div>
    <h4 class="text-center">
        Introduction:
        <div id="introduction">@Html.DisplayFor(model => model.PatientIntro)</div>
    </h4>
    <br /><br />
    <h4 class="text-center">
        Instructions:
        <p id="instructions">
            For each case presention detail the anticipated "classic" physical exam
            findings and match the case and PE box to the corresponding lab findings.
            Finally, enter the lead diagnosis for each case presentation and align
            these in the column with the HPI and physical findings. When done, save
            your slide to PDF or JPG and submit to the assignment in Webcourses.
        </p>
    </h4>
</div>



<style>
    .bable.draggable-word {
        background-color: red;
        padding: 0px;
        border: 1px solid green;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: auto;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        border-collapse: collapse;
        border-spacing: 0;
        padding: 0;
        margin: 0;
        line-height: 1;
        width: 100%;
        height: 50px;
    }

    .drop-zone {
        height: 190px;
        border: 3px solid #224163;
        background-color: #AABACC;
        margin-top: 15px;
        text-align: center;
        overflow: auto;
    }

    [draggable=true] {
        cursor: default;
        margin-top: 0px;
        margin-bottom: 0px;
        margin-top: 0px;
    }

    .bable {
        border-color: #600;
        border-width: 0 0 1px 1px;
        border-style: solid;
    }

    

    .box {
        border: 3px solid #765;
        background-color: #ddd;
        border-radius: .5em;
        padding: 10px;
        cursor: move;
    }

    .box.over {
        border: 3px dotted #666;
    }

    .background-blue {
        background-color: #9dc3e6;
    }

    .background-yellow {
        background-color: #ffe699;
    }

    .background-purple {
        background-color: #d7bcea;
    }

    .background-green {
        background-color: #a5e9aa;
    }

    .product {
        height: 90px;
        float: left;
        border: 2px solid #666666;
        text-align: center;
        cursor: move;
        overflow: auto;
    }

    .bag {
        height: 50px;
        text-align: center;
    }
    /*
    [class*="col"] {
        padding: 1rem;
        background-color: #224163;
        border: 2px solid #fff;
        color: #fff;
        }*/
</style>

<script>
    var user = "";
    var multiples = false;
    var data;

    function dragStartHandler(event, id, zone1) {
        event.dataTransfer.setData('Object', event.target.id);
        user = id;
        multiples = false;
        data = event.dataTransfer.getData('Object');

        //var zone1 = event.target;

        //console.log(zone1);
        //console.log(zone1.hasChildNodes());
        //zone1 = zone1.parentNode;
        //console.log(zone1)
        //console.log(zone1.childElementCount);
        //zone1 = event.dataTransfer.getData('Object');
        //console.log(zone1)
        //while (zone1.id.substring(0, 10) !== 'drop-zone5') {
        //    zone1 = zone1.parentNode;
        //}

        //console.log("Checking if element has child nodes: " + data.hasChildNodes())
        // multipleDrag(data,"false");

    }
    function dropHandler(event) {
        preventDefaults(event);
        if (!event.target) {
            // alert('we');
            event.target = event.srcElement;
        }
        var dropzone = event.target;
        console.log("Drop")
        console.log(data)
        data = event.dataTransfer.getData('Object');
        console.log(data)
        while (dropzone.id.substring(0, 9) !== 'drop-zone') {
            dropzone = dropzone.parentNode;
        }
        console.log(dropzone);
        console.log(dropzone.hasChildNodes());
        console.log(document.getElementById("drop-zone-yellow-box1"));
        console.log(document.getElementById("drop-zone-yellow-box1").childElementCount);
        console.log(dropzone.id.substring(10, 22))
        console.log(data.substring(1, 12))
        if (dropzone.childElementCount == false && (dropzone.id.substring(10, 22) == data.substring(1, 12) || dropzone.id.substring(9, 16) == data.substring(0, 7))) {
            dropzone.appendChild(document.getElementById(data));
            //console.log(dropzone)
        }


        //data = event.dataTransfer.getData('Object');
        //event.target.appendChild(document.getElementById(data));
        document.getElementById(data).selectedIndex = -1;
        //alert(user);
    }

    function dragOverHandler(event) {
        preventDefaults(event);
    }

    function preventDefaults(event) {
        if (event.preventDefault) {
            event.preventDefault();
        }

        try {
            event.returnValue = false;
        }
        catch (exception) { }
    }


    function dragend(event) {
        //    multipleDrag(data,"true");

    }

    function multipleDrag(data, state) {
        document.getElementById(data).setAttribute("draggable", state);
    }


    function sort(uList) {
        var listItem = document.getElementById(uList).getElementsByTagName('td');
        var listLength = listItem.length;
        var list = [];

        for (var i = 0; i < listItem.length; i++) {
            list[i] = listItem[i].id.substring(1, listItem[i].id.length);
            list.sort(function (a, b) { return parseInt(a) > parseInt(b) });
        }
        for (var i = 0; i < listLength; i++) {
            listItem[i].firstChild.nodeValue = list[i];
        }
    }
</script>
<div class="container-fluid border rounded">
    <div class="container-fluid border rounded">
        <div class="row bg-white">
            <div class="col-4">
                <div class="row">
                    <div class="drop-zone col-6" ondragover="dragOverHandler(event);" ondrop="dropHandler(event)" id="drop-zone-yellow-box1" ondragend="sort('drop-zone1')">
                        <div class="background-yellow product col-12" draggable="true" ondragstart="dragStartHandler(event,'4', this);" id="+yellow-box1" ondragend="dragend(event);">
                            <div>
                                <button type="button" class="format btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdropPhysicalA">
                                    expand
                                </button>
                            </div><!-- Button trigger modal -->
                            <span class="text-center" style="white-space: pre-line">@Model.PhysicalA</span>
                        </div>
                    </div>
                    <div class="drop-zone col-6" ondragover="dragOverHandler(event);" ondrop="dropHandler(event)" id="drop-zone-yellow-box2">
                        <div class="background-yellow product col-12" draggable="true" ondragstart="dragStartHandler(event,'4', this);" id="+yellow-box2" ondragend="dragend(event);">
                            <div>
                                <button type="button" class="format btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdropPhysicalB">
                                    expand
                                </button>
                            </div>
                            <span class="text-center" style="white-space: pre-line">@Model.PhysicalB</span>
                        </div>
                    </div>
                    <div class="drop-zone col-6" ondragover="dragOverHandler(event);" ondrop="dropHandler(event)" id="drop-zone-yellow-box3">
                        <div class="background-yellow  product col-12" draggable="true" ondragstart="dragStartHandler(event,'4', this);" id="+yellow-box3" ondragend="dragend(event);">
                            <div>
                                <button type="button" class="format btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdropPhysicalC">
                                    expand
                                </button>
                            </div>
                            <span class="text-center" style="white-space: pre-line">@Model.PhysicalC</span>
                        </div>
                    </div>
                    <div class="drop-zone col-6" ondragover="dragOverHandler(event);" ondrop="dropHandler(event)" id="drop-zone-yellow-box4">
                        <div class="background-yellow product col-12" draggable="true" ondragstart="dragStartHandler(event,'4', this);" id="+yellow-box4" ondragend="dragend(event);">
                            <div>
                                <button type="button" class="format btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdropPhysicalD">
                                    expand
                                </button>
                            </div>
                            <span class="text-center" style="white-space: pre-line">@Model.PhysicalD</span>
                        </div>
                    </div>
                    <div class="drop-zone col-6" ondragover="dragOverHandler(event);" ondrop="dropHandler(event)" id="drop-zone-purple-box1">
                        <div class="background-purple product col-12" draggable="true" ondragstart="dragStartHandler(event,'4', this);" id="+purple-box1" ondragend="dragend(event);">
                            <div>
                                <button type="button" class="format btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdropDiagnosticA">
                                    expand
                                </button>
                            </div>
                            <span class="text-center" style="white-space: pre-line">@Model.DiagnosticA</span>
                        </div>
                    </div>
                    <div class="drop-zone col-6" ondragover="dragOverHandler(event);" ondrop="dropHandler(event)" id="drop-zone-purple-box2">
                        <div class="background-purple product col-12" draggable="true" ondragstart="dragStartHandler(event,'4', this);" id="+purple-box2" ondragend="dragend(event);">
                            <div>
                                <button type="button" class="format btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdropDiagnosticB">
                                    expand
                                </button>
                            </div>
                            <span class="text-center" style="white-space: pre-line">@Model.DiagnosticB</span>
                        </div>
                    </div>
                    <div class="drop-zone col-6" ondragover="dragOverHandler(event);" ondrop="dropHandler(event)" id="drop-zone-purple-box3">
                        <div class="background-purple product col-12" draggable="true" ondragstart="dragStartHandler(event,'4', this);" id="+purple-box3" ondragend="dragend(event);">
                            <div>
                                <button type="button" class="format btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdropDiagnosticC">
                                    expand
                                </button>
                            </div>
                            <span class="text-center" style="white-space: pre-line">@Model.DiagnosticC</span>
                        </div>
                    </div>
                    <div class="drop-zone col-6" ondragover="dragOverHandler(event);" ondrop="dropHandler(event)" id="drop-zone-purple-box4">
                        <div class="background-purple product col-12" draggable="true" ondragstart="dragStartHandler(event,'4', this);" id="+purple-box4" ondragend="dragend(event);">
                            <div>
                                <button type="button" class="format btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdropDiagnosticD">
                                    expand
                                </button>
                            </div>
                            <span class="text-center" style="white-space: pre-line">@Model.DiagnosticD</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="row">
                    <div class="background-blue drop-zone col" ondragover="dragOverHandler(event);" ondrop="dropHandler(event)" id="drop-zone">
                        @if (column1 == 1){
                            <span style="white-space: pre-line">@Model.HistoryA</span>}
                        else if (column1 == 2){
                            <span style="white-space: pre-line">@Model.HistoryB</span>}
                        else if (column1 == 3){
                            <span style="white-space: pre-line">@Model.HistoryC</span>}
                        else if (column1 == 4){
                            <span style="white-space: pre-line">@Model.HistoryD</span>}
                        else if (column1 == 5){
                            <span style="white-space: pre-line">@Model.HistoryE</span>}
                    </div>
                    <div class="background-blue drop-zone col" ondragover="dragOverHandler(event);" ondrop="dropHandler(event)" id="drop-zone">
                        @if (column2 == 1){
                            <span style="white-space: pre-line">@Model.HistoryA</span>}
                        else if (column2 == 2){
                            <span style="white-space: pre-line">@Model.HistoryB</span>}
                        else if (column2 == 3){
                            <span style="white-space: pre-line">@Model.HistoryC</span>}
                        else if (column2 == 4){
                            <span style="white-space: pre-line">@Model.HistoryD</span>}
                        else if (column2 == 5){
                            <span style="white-space: pre-line">@Model.HistoryE</span>}
                    </div>
                    <div class="background-blue drop-zone col" ondragover="dragOverHandler(event);" ondrop="dropHandler(event)" id="drop-zone">
                        @if (column3 == 1){
                            <span style="white-space: pre-line">@Model.HistoryA</span>}
                        else if (column3 == 2){
                            <span style="white-space: pre-line">@Model.HistoryB</span>}
                        else if (column3 == 3){
                            <span style="white-space: pre-line">@Model.HistoryC</span>}
                        else if (column3 == 4){
                            <span style="white-space: pre-line">@Model.HistoryD</span>}
                        else if (column3 == 5){
                            <span style="white-space: pre-line">@Model.HistoryE</span>}
                    </div>
                    <div class="background-blue drop-zone col" ondragover="dragOverHandler(event);" ondrop="dropHandler(event)" id="drop-zone">
                        @if (column4 == 1){
                            <span style="white-space: pre-line">@Model.HistoryA</span>}
                        else if (column4 == 2){
                            <span style="white-space: pre-line">@Model.HistoryB</span>}
                        else if (column4 == 3){
                            <span style="white-space: pre-line">@Model.HistoryC</span>}
                        else if (column4 == 4){
                            <span style="white-space: pre-line">@Model.HistoryD</span>}
                        else if (column4 == 5){
                            <span style="white-space: pre-line">@Model.HistoryE</span>}
                    </div>
                </div>
                <div class="row">
                    <div class="background-yellow drop-zone col" ondragover="dragOverHandler(event);" ondrop="dropHandler(event)" id="drop-zone+yellow-area1"></div>
                    <div class="background-yellow drop-zone col" ondragover="dragOverHandler(event);" ondrop="dropHandler(event)" id="drop-zone+yellow-area2"></div>
                    <div class="background-yellow drop-zone col" ondragover="dragOverHandler(event);" ondrop="dropHandler(event)" id="drop-zone+yellow-area3"></div>
                    <div class="background-yellow drop-zone col" ondragover="dragOverHandler(event);" ondrop="dropHandler(event)" id="drop-zone+yellow-area4"></div>
                </div>
                <div class="row">
                    <div class="background-purple drop-zone col" ondragover="dragOverHandler(event);" ondrop="dropHandler(event)" id="drop-zone+purple-area1"></div>
                    <div class="background-purple drop-zone col" ondragover="dragOverHandler(event);" ondrop="dropHandler(event)" id="drop-zone+purple-area2"></div>
                    <div class="background-purple drop-zone col" ondragover="dragOverHandler(event);" ondrop="dropHandler(event)" id="drop-zone+purple-area3"></div>
                    <div class="background-purple drop-zone col" ondragover="dragOverHandler(event);" ondrop="dropHandler(event)" id="drop-zone+purple-area4"></div>
                </div>
                <div class="row">
                    <div class="background-green drop-zone col" ondragover="dragOverHandler(event);" ondrop="dropHandler(event)" id="drop-zone"></div>
                    <div class="background-green drop-zone col" ondragover="dragOverHandler(event);" ondrop="dropHandler(event)" id="drop-zone"></div>
                    <div class="background-green drop-zone col" ondragover="dragOverHandler(event);" ondrop="dropHandler(event)" id="drop-zone"></div>
                    <div class="background-green drop-zone col" ondragover="dragOverHandler(event);" ondrop="dropHandler(event)" id="drop-zone"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- PhysicalA -->
<div class="modal fade" id="staticBackdropPhysicalA" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <span class="text-center" style="white-space: pre-line">@Model.PhysicalA</span>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- PhysicalB -->
<div class="modal fade" id="staticBackdropPhysicalB" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <span class="text-center" style="white-space: pre-line">@Model.PhysicalB</span>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- PhysicalC -->
<div class="modal fade" id="staticBackdropPhysicalC" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <span class="text-center" style="white-space: pre-line">@Model.PhysicalC</span>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- PhysicalD -->
<div class="modal fade" id="staticBackdropPhysicalD" data-bs-backdrop="staticPhysicalD" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <span class="text-center" style="white-space: pre-line">@Model.PhysicalD</span>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- DiagnosticA -->
<div class="modal fade" id="staticBackdropDiagnosticA" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <span class="text-center" style="white-space: pre-line">@Model.DiagnosticA</span>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- DiagnosticB -->
<div class="modal fade" id="staticBackdropDiagnosticB" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <span class="text-center" style="white-space: pre-line">@Model.DiagnosticB</span>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- DiagnosticC -->
<div class="modal fade" id="staticBackdropDiagnosticC" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <span class="text-center" style="white-space: pre-line">@Model.DiagnosticC</span>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- DiagnosticD -->
<div class="modal fade" id="staticBackdropDiagnosticD" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <span class="text-center" style="white-space: pre-line">@Model.DiagnosticD</span>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
