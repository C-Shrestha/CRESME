
@{
    ViewData["Title"] = "Change Password";
    
}



<div id="flexbox" aria-live="polite" aria-atomic="true" class="pt-5 d-flex justify-content-end align-items-end w-100">

    @if (TempData["AlertMessage"] != null)
    {
        <div class="toast  " role="alert" aria-live="assertive" style="position: fixed" aria-atomic="true">
            <div class="toast-header">
                <img src="../images/canvas3.png" width="30" height="30" class="rounded me-2">
                <strong class="me-auto">CRESME</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body bg-danger">
                @TempData["AlertMessage"]
            </div>
        </div>

    }

    @if (TempData["Success"] != null)
    {
        <div class="toast  " role="alert" aria-live="assertive" style="position: fixed" aria-atomic="true">
            <div class="toast-header">
                <img src="../images/canvas3.png" width="30" height="30" class="rounded me-2">
                <strong class="me-auto">CRESME</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body bg-success">
                @TempData["Success"]
            </div>
        </div>
    }



</div>

<form asp-controller="Admin" asp-action="UpdatePassword" method="post" onsubmit="return validate()">
    <div class="container border bg-light rounded" style="width: 50%;">
            <div class="row gx-5 justify-content-center gy-2">
     
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>

                <div class="w-100"></div>
                <h4 class="col-6 text-center" style="font-weight: bold;">Change Password</h4>

                <div class="w-100"></div>
                <div class="col-10" style="height: 5px; background-color: #f1c400;"></div>
                
                <div class="col-6 text-center" style="font-weight: bold;">Old Password</div>
                <div class="w-100"></div>

                <input name="oldPassword" id="oldPassword" type="password" class="col-4 input-field" aria-required="true" placeholder="Old Password" />
                <div class="w-100"></div>

                
                <div class="col-6 text-center" style="font-weight: bold;">New Password</div>
                <div class="w-100"></div>

                <input name="newPassword" id="newPassword" type="password"  class="col-4  input-field" aria-required="true" placeholder="New Password" />
                <div class="w-100"></div>

                <div class="w-100"></div>
                <div class="col-6 text-center" style="font-weight: bold;">Confirm Password</div>

                <div class="w-100"></div>
                <input name="confirmPassword" id="confirmPassword" type="password"  class="col-4  input-field" aria-required="true" placeholder="Confirm Password" />
                <div class="w-100"></div>

                <button type="submit" class="btn custom_btn col-5">Change password</button>
                <div class="w-100"></div>
        </div>
    </div>
</form>

<br />

<style>

    .container {
        border-color: #F1C400 !important;
        border-radius: 20px !important;
    }

    .custom_btn {
        background-color: #F1C400;
        font-weight: bold;
    }

    .upload-btn {
        border-color: #F1C400 !important;
        background: transparent;
    }

    .input-field {
        border-color: #F1C400;
    }

    label {
        background-color: white;
        padding: 0.5rem;
        border-color: #F1C400 !important;
        cursor: pointer;
    }

</style>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />

        <script>

            window.onload = function () {
                // your code here
                $('.toast').toast('show');
            };

            function showToast(toast) {
                var showToast = new bootstrap.Toast(toast);
                showToast.show();

            }

            function validate(){

                var newPassword = document.getElementById("newPassword");
                var confirmPassword = document.getElementById("confirmPassword");
                var oldPassword = document.getElementById("oldPassword");

                if (newPassword.value == "" || confirmPassword.value == "" || oldPassword.value == "") {

                    var toast = document.createElement("div");
                    toast.setAttribute("aria-live", 'assertive');
                    toast.setAttribute("aria-atomic", 'true');
                    toast.setAttribute("class", 'toast');
                    toast.setAttribute("role", 'alert');
                    toast.style.position = "absolute";



                    var toastHeader = document.createElement("div");
                    toastHeader.setAttribute("class", 'toast-header');

                    var img = document.createElement("img");
                    img.src = '../images/canvas3.png';
                    img.setAttribute("width", '30');
                    img.setAttribute("height", '30');
                    img.setAttribute("class", 'rounded mr-2');

                    var strong = document.createElement("strong");
                    strong.innerHTML = "CRESME";
                    strong.setAttribute("class", 'me-auto');

                    var button = document.createElement("button");
                    button.setAttribute("class", 'btn-close');
                    button.setAttribute("data-bs-dismiss", 'toast');
                    button.setAttribute("aria-label", 'Close');

                    var toastBody = document.createElement("div");
                    toastBody.setAttribute("class", 'toast-body bg-warning');
                    toastBody.innerHTML = "All Input Fields are Required!"

                    var flexbox = document.getElementById("flexbox");

                    flexbox.prepend(toast);

                    toast.prepend(toastBody);
                    toast.prepend(toastHeader);

                    toastHeader.prepend(button);
                    toastHeader.prepend(strong);
                    toastHeader.prepend(img);


                    showToast(toast);

                    return false;

                }

                if(newPassword.value != confirmPassword.value)
                {
                    var toast = document.createElement("div");
                    toast.setAttribute("aria-live", 'assertive');
                    toast.setAttribute("aria-atomic", 'true');
                    toast.setAttribute("class", 'toast');
                    toast.setAttribute("role", 'alert');
                    toast.style.position = "absolute";



                    var toastHeader = document.createElement("div");
                    toastHeader.setAttribute("class", 'toast-header');

                    var img = document.createElement("img");
                    img.src = '../images/canvas3.png';
                    img.setAttribute("width", '30');
                    img.setAttribute("height", '30');
                    img.setAttribute("class", 'rounded mr-2');

                    var strong = document.createElement("strong");
                    strong.innerHTML = "CRESME";
                    strong.setAttribute("class", 'me-auto');

                    var button = document.createElement("button");
                    button.setAttribute("class", 'btn-close');
                    button.setAttribute("data-bs-dismiss", 'toast');
                    button.setAttribute("aria-label", 'Close');

                    var toastBody = document.createElement("div");
                    toastBody.setAttribute("class", 'toast-body bg-warning');
                    toastBody.innerHTML = "Passwords do not match!"

                    var flexbox = document.getElementById("flexbox");

                    flexbox.prepend(toast);

                    toast.prepend(toastBody);
                    toast.prepend(toastHeader);

                    toastHeader.prepend(button);
                    toastHeader.prepend(strong);
                    toastHeader.prepend(img);


                    showToast(toast);

                    return false;
                }

            }

        </script>
}
